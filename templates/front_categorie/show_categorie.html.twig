{% extends 'base.html.twig' %}

{% block title %}
	{{ categorie.nom }}
{% endblock %}

{% block body %}
	<div class="row justify-content-around">
		{{ render(controller('App\\Controller\\FrontCategorieController::renderCategorieMenu'))}}
		<div class="col-12 col-lg-9">
			{% for sousCategorie in categorie.sousCategories %}
				<h1 class='title-green mt-3 ms-2'>{{ sousCategorie.nom }}</h1>
				{% if sousCategorie.description is not null %}
					<p>{{ sousCategorie.description }}</p>
				{% endif %}
				<div class='d-flex'>
					{% for produit in sousCategorie.produits %}
						<div class="card w-25 mx-2 card-product">
							{% if produit.images | length > 0 %}
								<img src="{{ asset('images/images/' ~ produit.images[0].imageName ) }}" class="card-img-top img-fluid" alt="{{ produit.images[0].imageName }}">
							{% else %}
								<img src="{{ asset('images/images/Pas_d_image_disponible.svg.png') }}" class="card-img-top img-fluid" alt="">
							{% endif %}
							<div class="card-body d-flex flex-column justify-content-end">
								<h5 class="card-title">{{ produit.nom }}</h5>
								<div class="d-flex justify-content-between mt-2">
									{% if produit.discount is not null %}
										<p class="card-text">
											<s>{{ produit.prix }}€</s>
											<span>{{ produit.prix-(produit.prix*produit.discount/100) }}€</span>
										</p>
										<p class="card-text">
											<small class="discount p-1">-{{ produit.discount }}%</small>
										</p>
									{% else %}
										<p class="card-text">{{ produit.prix }}€</p>
									{% endif %}
									<a href="{{ path('app_front_produit')}}" class="btn btn-success btn-sm">Voir</a>
								</div>
							</div>
						</div>
					{% endfor %}
				</div>
			{% endfor %}
		</div>
	</div>
{% endblock %}
